Checklist for an Infernal release.
SRE, Mon Oct 31 07:40:36 2005 
-------------------------------------

Infernal has an "unstable trunk" policy. 
A release goes on a stable branch.


1. Announce the intent to release to all developers. 
   All working copies of Infernal and its dependent libraries (ssdk,
   squid, and Easel) should be committed. 
   Example of checking for stray or uncommitted files:
	% ./configure
        % make distclean
        % svn update
	% svn status
   Clean up any stray files identified by 'svn status'.
   'svn add' and 'svn commit' as needed to commit new or modified files.


2. Test the trunk before making release.
   Includes memory leak tests;
   ccmalloc 0.4.0 is installed in /usr/local on wrasse.
   Don't rely solely on the automated exercises and bug tests.
   Run some anecdotal examples by hand too.
        % svn update
    	% autoconf
        % (cd squid; autoconf)
        % (cd easel; autoconf)
     	% (env CFLAGS="-g -Wall" ./configure; make)
        % make check
        % make clean
        % (env ./configure --enable-ccmalloc; make)
        % cd Bugs
        % ../ssdk/sqc -m 2 bugs.sqc ../src
        % cd ../testsuite
	% ../ssdk/sqc -m -p ../squid 4 exercises.sqc . ../src
	% make clean
        % (./configure; make; make check)
        % make clean

3. Write release notes.
   Replace "875" below with the last release's SVN rev.
	% svn log -r 875:HEAD | more
        % emacs documentation/release-notes/RELEASE-${RELEASE}
	% svn add documentation/release-notes/RELEASE-${RELEASE}

4. Update the copyright, year stamps. 
	- configure.in (release, relcode, date)
	- COPYRIGHT (year only)

5. Commit to SVN; include release number in the log message
	% svn commit
    Remember to separately commit in Easel, squid, ssdk if any
    changes were made there.

6. make a distribution package
	% make distclean
	% autoconf             <-- only wrasse. Must be autoconf >=2.57
	% ./configure          <-- makes a Makefile (needed for "make dist")
	% make dist

7. Build for our system (on whelk01 or some such)
	% cd infernal-xxx
	% env CC=icc CFLAGS="-O3" ./configure --enable-lfs --bindir=/usr/seshare/`uname`/infernal/
	% make
	% make check
        % (cd testsuite; ./sqc -p ../squid/ -r ../../infernal-0.52/src 4 regressions.sqc ../src/)
                                                  ^^^^ replace w/ latest old version
	% make install         <-- I don't need root to do this
	% ssh w001
	% cd /nfs/wol2/people/eddy/src/infernal/infernal-xxx
	% ./configure          <-- sets paths to /usr/local
	% sudo make install
	% logout

8. Put on the FTP site. (on wrasse)
	$ cd ..                <-- back in dev dir 
	% make ftpdist
        % emacs /nfs/www/docs/eddy/infernal/index.html   <- edit the web site, if needed.
	

9. Clean up.
	% make distclean

0.3  - SRE, Thu Jul  4 10:27:16 2002
0.5  - SRE, Sun Oct  6 14:22:47 2002
0.51 - SRE, Wed Oct  9 09:43:50 2002
0.52 - SRE, Mon Oct 14 2002
0.53 - SRE, Thu Jan  2 14:24:07 2003
0.54 - SRE, Sun Jan  5 18:17:55 2003
0.55 - SRE, Wed Apr  2 18:12:23 2003   r875
0.6  - SRE, Mon Oct 31 13:08:33 2005   